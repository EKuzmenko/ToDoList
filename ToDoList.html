<!DOCTYPE html>
<html>

<head>
    <title>ToDoList</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" type="text/css" href="ToDoList.css">

</head>

<body>
    <div class="top">
        <h1>To Do:</h1>
        <input type="text" id="inpTask" placeholder="Task..."><br>
        <span id="output_tasks"></span>
        <button type="button" id="btnAddTask" onclick="newElement()">Add</button><br>
    </div>
    <ul class="list" id="myUL">
        <li>Купить хлеб</li>
        <li class="checked">Заплатить комуналку</li>
        <li>Погулять с собаками</li>
        <li>Подстричь газон</li>
        <li>Помыть машину</li>
    </ul>
</body>

<script>
    // Create a "close" button and append it to each list item
    let myNodelist = document.getElementsByTagName("LI");

    for (i = 0; i < myNodelist.length; i++) {
        let span = document.createElement("SPAN");
        let txt = document.createTextNode("\u00D7");
        span.className = "close";
        span.appendChild(txt);
        myNodelist[i].appendChild(span);
        
        // let spanEdit = document.createElement("SPAN_EDIT");
        // let txtEdit = document.createTextNode("\u270e");
        // spanEdit.className = "edit";
        // spanEdit.appendChild(txtEdit);
        // myNodelist[i].appendChild(spanEdit);
    }

    // Click on a close button to hide the current list item
    let close = document.getElementsByClassName("close");
    for (let i = 0; i < close.length; i++) {
        close[i].onclick = function () {
            let div = this.parentElement;
            div.style.display = "none";  
        }
    }

    // Click on a edit button to edit the current list item
    let edit = document.getElementsByClassName("edit");
    for (let i = 0; i < edit.length; i++) {
        edit[i].onclick = function () {
            let div = this.parentElement;
            let newTask=prompt("Введите новую задачу:")
            this.parentElement.innerHTML=newTask;
        }
    }

    // Add a "checked" symbol when clicking on a list item
    let list = document.querySelector('ul');
    list.addEventListener('click', function (ev) {
        if (ev.target.tagName === 'LI') {
            ev.target.classList.toggle('checked');
        }
    }, false);

    // Create a new list item when clicking on the "Add" button
    function newElement() {
        let li = document.createElement("li");
        let inputValue = document.getElementById("inpTask").value;
        let t = document.createTextNode(inputValue);
        li.appendChild(t);
        if (inputValue === '') {
            alert("You must write something!");
        } else {
            document.getElementById("myUL").appendChild(li);
        }
        document.getElementById("inpTask").value = "";

        let span = document.createElement("SPAN");
        let txt = document.createTextNode("\u00D7");
        span.className = "close";
        span.appendChild(txt);
        li.appendChild(span);
        
        let spanEdit = document.createElement("SPAN_EDIT");
        let txtEdit = document.createTextNode("\u270e");
        spanEdit.className = "edit";
        spanEdit.appendChild(txtEdit);
        li.appendChild(spanEdit);

        for (let i = 0; i < close.length; i++) {
            close[i].onclick = function () {
                let div = this.parentElement;
                div.style.display = "none";
            }
        }
            //ДОРАБОТАТЬ!!!
        for (let i = 0; i < edit.length; i++) {
            edit[i].onclick = function () {
                let div = this.parentElement;
                div.disabled = false;
            }
        }
    }
    /* let taskArray = [];
    //Add task in array with id
    function addTaskArray() {
        let addTask = document.getElementById('inpTask').value;
        taskArray.unshift({ id: (Date.now()), task: addTask })
    }
    //Display task as a list
    function setTaskArray(taskArray) {
        html = '<ul class="list">';
        let taskArr = taskArray.map(el => Object.values(el).map((el, index) => index == 1 ? html += '<li class="elList">' + el + '<br>' : ""))
        html += '</ul>'
        document.getElementById('output_tasks').innerHTML = html;
    }
    //Clear input after click "Add"
    function clearInput (inpTask){
        document.getElementById("inpTask").value = "";
    } */
</script>

</html>